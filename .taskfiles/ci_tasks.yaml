version: "3"
tasks:
  analyze:
    desc: Lints the project
    dir: template
    env:
      MIX_ENV: test
    cmds:
      - mix deps.unlock --check-unused
      - mix hex.audit
      - mix format --check-formatted
      - mix credo
      - mix excellent_migrations.check_safety
      - mix sobelow --config

  test:
    desc: Tests the project
    dir: template
    env:
      MIX_ENV: test
    cmds:
      - mix ecto.drop
      - mix ecto.create
      - mix ecto.migrate
      - mix coveralls.json
