version: "3"
tasks:
  download-assets:
    cmds:
      - mkdir -p ./assets/vendor/phosphor
      - wget -qO- https://github.com/phosphor-icons/homepage/releases/download/v2.0.0/phosphor-icons.zip | bsdtar -xv -C ./assets/vendor/phosphor -f-
      - find ./assets/vendor/phosphor/**/SVGs -type f -exec sh -c 'mv "$@" ./assets/vendor/phosphor' _ {} +
      - find ./assets/vendor/phosphor/** ! -name "*.svg" -depth -exec rm -rf {} +
      - find ./assets/vendor/phosphor -type f -exec sh -c 'svgo "$@"' _ {} +
      - wget -q -O ./assets/vendor/phosphor/LICENSE https://raw.githubusercontent.com/phosphor-icons/core/v2.0.0/LICENSE
      - mkdir -p ./assets/vendor/fonts
      - wget -qO- https://www.gent.media/assets/manrope/manrope.zip | bsdtar -xv -C ./assets/vendor/fonts -f-
      - find ./assets/vendor/fonts/**/webfonts -type f -name *.woff2 -exec sh -c 'mv "$@" ./assets/vendor/fonts' _ {} +
      - find ./assets/vendor/fonts/** ! -name "*.woff2" -depth -exec rm -rf {} +

  dev:
    cmds:
      - mix phx.server
